# 환경정보
* 우분투서버(기본 케릭터셋 UTF-8)
# 증상
텍스트 분석 모듈의 분석 결과가 깨지는 현상 발생
# 원인
1. C모듈에 분석 데이터는 EUC-KR 인코딩으로 전달해야 한다
1. 웹 관리자 화면에서 분석 요청시 업로드하는 분석 데이터 파일은 EUC-KR만 올리기로 했다
1. 그런데 UTF-8 로 인코딩된 파일을 업로드 하기도 해서 문자 깨짐 현상 발생
# 해결방안
* 1안) EUC-KR로만 올리려달라고 부탁한다
* 2안) 인코딩을 감지해서 어떤것으로 들어와도 대응할 수 있게 한다
# 결론
 두번째 해결방안으로 사용자가 예외를 발생시켜도 대응할 수 있게 했다
# 느낀점
1. form이나 ajax로 넘어오는 데이터는 벨리데이션을 하는데 파일 업로드로 넘어오는 데이터도 다양한 방면에서 검증을 해야한다고 느꼈다.
1. 입력 파일을 InputStream으로 읽어서 읽은 버퍼만큼 String으로 변환하며 깨진 문자인 �('\u+FFFD')를 indexOf를 통해 찾는 방식으로 해결했는데 좀더 빠르고 효과적인 방식이 있지 않을까 고민해볼 필요가 있다고 느꼈다.
